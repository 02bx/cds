<!DOCTYPE html>
<html id="docs" lang="en" class="">
	<head>
	<meta charset="utf-8">
<title>Application configuration file - CDS - Continuous Delivery Service</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" type="image/png" href="https://ovh.github.io/cds/images/favicon.png">




<link rel="stylesheet" href="https://ovh.github.io/cds/sass/styles.css" integrity="" media="screen">
<link rel="stylesheet" href="https://ovh.github.io/cds/css/auto-complete.css">
<link rel="stylesheet" href="https://ovh.github.io/cds/css/fontawesome.min.css">
<link rel="stylesheet" href="https://ovh.github.io/cds/css/asciinema-player.css">
<link rel="stylesheet" href="https://ovh.github.io/cds/css/solarized-light.css">

<meta name="description" content="An Application allows you to enable some features of CDS within a workflow.
 Variables Keys VCS Deployment  The application configuration format is as following:
version: v1.0 name: my-application variables: variables: artifact.name: type: string value: my-application docker.image: value: my-org/my-application docker.registry: value: hub.docker.com keys: app-mySSHKey: type: ssh repo: my-org/my-application vcs_server: github vcs_connection_type: ssh vcs_ssh_key: app-mySSHKey deployments: my-kubernetes-cluster: timeout: value: 180 namespace: my-namespace helm_chart: value: deploy/helm/ helm_values: type: deploy/helm/values.yaml  Variables Define application scoped variables as a dictionnary.">
<meta property="og:description" content="An Application allows you to enable some features of CDS within a workflow.
 Variables Keys VCS Deployment  The application configuration format is as following:
version: v1.0 name: my-application variables: variables: artifact.name: type: string value: my-application docker.image: value: my-org/my-application docker.registry: value: hub.docker.com keys: app-mySSHKey: type: ssh repo: my-org/my-application vcs_server: github vcs_connection_type: ssh vcs_ssh_key: app-mySSHKey deployments: my-kubernetes-cluster: timeout: value: 180 namespace: my-namespace helm_chart: value: deploy/helm/ helm_values: type: deploy/helm/values.yaml  Variables Define application scoped variables as a dictionnary.">
<meta name="twitter:description" content="An Application allows you to enable some features of CDS within a workflow.
 Variables Keys VCS Deployment  The application configuration format is as following:
version: v1.0 name: my-application variables: variables: artifact.name: type: string value: my-application docker.image: value: my-org/my-application docker.registry: value: hub.docker.com keys: app-mySSHKey: type: ssh repo: my-org/my-application vcs_server: github vcs_connection_type: ssh vcs_ssh_key: app-mySSHKey deployments: my-kubernetes-cluster: timeout: value: 180 namespace: my-namespace helm_chart: value: deploy/helm/ helm_values: type: deploy/helm/values.yaml  Variables Define application scoped variables as a dictionnary.">
<meta property="og:url" content="https://ovh.github.io/cds/docs/concepts/files/application-syntax/">
<meta property="og:title" content="Application configuration file">
<meta name="twitter:title" content="Application configuration file">
<meta name="twitter:image:alt"   content="CDS - Continuous Delivery Service">
<meta property="og:image" content="/images/cds-transparent.png">
<script type="text/javascript" src="https://ovh.github.io/cds/js/anchor-4.1.1.min.js"></script>
<script type="text/javascript" src="https://ovh.github.io/cds/js/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="https://ovh.github.io/cds/js/jquery-ui-1.12.1.min.js"></script>
<script type="text/javascript" src="https://ovh.github.io/cds/js/bootstrap-3.3.7.min.js"></script>
<script type="text/javascript" src="https://ovh.github.io/cds/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript" src="https://ovh.github.io/cds/js/script.js"></script>
<script type="text/javascript" src="https://ovh.github.io/cds/js/lunr.min.js"></script>
<script type="text/javascript">
    var baseurl = "https:\/\/ovh.github.io\/cds";
</script>
<script type="text/javascript" src="https://ovh.github.io/cds/js/auto-complete.js"></script>
<script type="text/javascript" src="https://ovh.github.io/cds/js/search.js"></script>
<script type="text/javascript" src="https://ovh.github.io/cds/js/asciinema-player.js"></script>

	</head>
	<body>
		<section id="hero" class="light-text no-sub">
			<a href="https://ovh.github.io/cds/" class="logo"></a>
				<i id="tocburger" class="fa fa-bars" onclick='$("#toc").toggle()'></i><div class="nav-buttons" data-auto-burger="primary">
				<ul class="global-nav">
					
					
					<li><a href="https://ovh.github.io/cds/docs/" class="active">Documentation</a></li>
					
					<li><a href="https://ovh.github.io/cds/hosting/">Hosting your own instance</a></li>
					
					<li><a href="https://ovh.github.io/cds/development/">CDS Developer Manual</a></li>
					
					<li><a href="https://ovh.github.io/cds/about/">About</a></li>
					
					<li><i class="fa fa-search" onclick='$("#searchbox").toggle(); $("#search-query").focus().select()'></i></li>
					<li>
						<div id="btn-gh">
							<a class="github-button" href="https://github.com/ovh/cds" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star CDS on GitHub">Star</a>
							<script async defer src="https://buttons.github.io/buttons.js"></script>
						</div>
					</li>
				</ul>
				<div id="searchbox">
					<input data-search-input id="search-query" type="text" placeholder="search...">
					<span data-search-clear=""><i class="fa fa-close"></i></span>
				</div>
			</div>

<div id="headSubMenu" class="light-text">




	

		

		
		<ul>
			
			
			
			<li><a href="https://ovh.github.io/cds/docs/">Home</a></li>
			
			
				
				<li><a href="https://ovh.github.io/cds/docs/concepts/" class="menuSelected">Concepts</a></li>
			
				
				<li><a href="https://ovh.github.io/cds/docs/actions/">Actions</a></li>
			
				
				<li><a href="https://ovh.github.io/cds/docs/components/">Components</a></li>
			
				
				<li><a href="https://ovh.github.io/cds/docs/integrations/">Integrations</a></li>
			
				
				<li><a href="https://ovh.github.io/cds/docs/tutorials/">Tutorials</a></li>
			
		</ul>
		
	

	

		

		
	

	

		

		
	

	

		

		
	

</div>


		</section>
		<section id="page-content-with-menu">
			
<div id="toc">
     <div class="toc-container">
        
        
        
        
        
            
                
                    
                        
                            
                                    
                                    
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                
            
        
            
                
                    
                        
                    
                
            
        
            
                
                    
                        
                    
                        
                    
                        
                    
                
            
        
            
                
                    
                
            
        
        
        <i class="fa fa-bars" id="tocburger" onclick='$("#toc").toggle()'></i> 
<a class="item" data-title="Concepts" href="https://ovh.github.io/cds/docs/concepts/"></a>

	
	
	
	
		
			
<a class="item" data-title="Job" href="https://ovh.github.io/cds/docs/concepts/job/"></a>

		
	
		
			
<a class="item" data-title="Permissions - ACLs" href="https://ovh.github.io/cds/docs/concepts/permissions/"></a>

		
	
		
			
<a class="item" data-title="Pipeline" href="https://ovh.github.io/cds/docs/concepts/pipeline/"></a>

		
	
		
			
<a class="item" data-title="Variables" href="https://ovh.github.io/cds/docs/concepts/variables/"></a>

		
	
		
			
<div class="item" data-title="Workflow">
	<div class="container">
		
		<a class="item" data-title="Workflow" href="https://ovh.github.io/cds/docs/concepts/workflow/"></a>
		
		
	
	
	
	
		
			
<a class="item" data-title="Payload" href="https://ovh.github.io/cds/docs/concepts/workflow/payload/"></a>

		
	
		
			
<a class="item" data-title="Pipeline Context" href="https://ovh.github.io/cds/docs/concepts/workflow/pipeline-context/"></a>

		
	
		
			
<div class="item" data-title="Hooks">
	<div class="container">
		
		<a class="item" data-title="Hooks" href="https://ovh.github.io/cds/docs/concepts/workflow/hooks/"></a>
		
		
	
	
	
	
		
			
<a class="item" data-title="Webhook" href="https://ovh.github.io/cds/docs/concepts/workflow/hooks/webhook/"></a>

		
	
		
			
<a class="item" data-title="Scheduler" href="https://ovh.github.io/cds/docs/concepts/workflow/hooks/scheduler/"></a>

		
	
		
			
<a class="item" data-title="Git Repository Webhook" href="https://ovh.github.io/cds/docs/concepts/workflow/hooks/git-repo-webhook/"></a>

		
	
		
			
<a class="item" data-title="Git Repository Poller" href="https://ovh.github.io/cds/docs/concepts/workflow/hooks/git-repo-poller/"></a>

		
	
		
			
<a class="item" data-title="Kafka hook" href="https://ovh.github.io/cds/docs/concepts/workflow/hooks/kafka-hook/"></a>

		
	
		
			
<a class="item" data-title="RabbitMQ hook" href="https://ovh.github.io/cds/docs/concepts/workflow/hooks/rabbitmq-hook/"></a>

		
	

	</div>
</div>

		
	
		
			
<a class="item" data-title="Run conditions on pipeline" href="https://ovh.github.io/cds/docs/concepts/workflow/run-conditions/"></a>

		
	
		
			
<a class="item" data-title="Join" href="https://ovh.github.io/cds/docs/concepts/workflow/join/"></a>

		
	
		
			
<a class="item" data-title="Mutex" href="https://ovh.github.io/cds/docs/concepts/workflow/mutex/"></a>

		
	
		
			
<a class="item" data-title="Sidebar" href="https://ovh.github.io/cds/docs/concepts/workflow/sidebar/"></a>

		
	
		
			
<a class="item" data-title="Run Number" href="https://ovh.github.io/cds/docs/concepts/workflow/run-number/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Requirement">
	<div class="container">
		
		<a class="item" data-title="Requirement" href="https://ovh.github.io/cds/docs/concepts/requirement/"></a>
		
		
	
	
	
	
		
			
<a class="item" data-title="Network Access" href="https://ovh.github.io/cds/docs/concepts/requirement/requirement_network/"></a>

		
	
		
			
<a class="item" data-title="Service Link" href="https://ovh.github.io/cds/docs/concepts/requirement/requirement_service/"></a>

		
	
		
			
<a class="item" data-title="OS &amp; Architecture" href="https://ovh.github.io/cds/docs/concepts/requirement/requirement_os_arch/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Configuration files">
	<div class="container">
		
		<a class="item" data-title="Configuration files" href="https://ovh.github.io/cds/docs/concepts/files/"></a>
		
		
	
	
	
	
		
			
<a class="item" data-title="Workflow configuration file" href="https://ovh.github.io/cds/docs/concepts/files/workflow-syntax/"></a>

		
	
		
			
<a class="item" data-title="Pipeline configuration file" href="https://ovh.github.io/cds/docs/concepts/files/pipeline-syntax/"></a>

		
	
		
			
<a class="item" data-title="Worker Model configuration file" href="https://ovh.github.io/cds/docs/concepts/files/worker_model-syntax/"></a>

		
	
		
			
<a class="item" data-title="Action configuration file" href="https://ovh.github.io/cds/docs/concepts/files/action-syntax/"></a>

		
	
		
			
<a class="item" data-title="Application configuration file" href="https://ovh.github.io/cds/docs/concepts/files/application-syntax/"></a>

		
	
		
			
<a class="item" data-title="Environment configuration file" href="https://ovh.github.io/cds/docs/concepts/files/environment-syntax/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Worker Model">
	<div class="container">
		
		<a class="item" data-title="Worker Model" href="https://ovh.github.io/cds/docs/concepts/worker-model/"></a>
		
		
	
	
	
	
		
			
<a class="item" data-title="Worker Model Variables" href="https://ovh.github.io/cds/docs/concepts/worker-model/variables/"></a>

		
	
		
			
<a class="item" data-title="Worker Model patterns" href="https://ovh.github.io/cds/docs/concepts/worker-model/patterns/"></a>

		
	

	</div>
</div>

		
	
		
			
<a class="item" data-title="Workflow Template" href="https://ovh.github.io/cds/docs/concepts/template/"></a>

		
	





     </div>
</div>


			<div id="docsContent">
        		

<h1>Application configuration file</h1>





<p>An <strong>Application</strong> allows you to enable some features of CDS within a workflow.</p>

<ul>
<li>Variables</li>
<li>Keys</li>
<li>VCS</li>
<li>Deployment</li>
</ul>

<p>The application configuration format is as following:</p>

<pre><code class="language-yaml">version: v1.0
name: my-application

variables:
  variables:
    artifact.name:
      type: string
      value: my-application
    docker.image:
      value: my-org/my-application
    docker.registry: 
      value: hub.docker.com

keys:
  app-mySSHKey:
    type: ssh

repo: my-org/my-application
vcs_server: github
vcs_connection_type: ssh
vcs_ssh_key: app-mySSHKey

deployments:
  my-kubernetes-cluster:
    timeout:
      value: 180
    namespace:
      my-namespace
    helm_chart:
      value: deploy/helm/
    helm_values:
      type: deploy/helm/values.yaml
</code></pre>

<h2 id="variables">Variables</h2>

<p>Define application scoped variables as a dictionnary. Each Variable must have a <code>type</code> and a <code>value</code>. You will be able to play with those variables using <code>{{.cds.app.my-variable}}</code> and <code>CDS_APP_MY_VARIABLE</code>. The recognized types are <code>string</code>, <code>password</code>, <code>text</code>, <code>boolean</code> or <code>number</code>. By default the type is <code>string</code>.</p>

<p>To be able to write secret in the CDS yaml files, you have to encrypt data within your CDS project.</p>

<pre><code class="language-bash">  $ cdsctl encrypt MYPROJECT my-data my-super-secret-value
  my-data: 01234567890987654321
</code></pre>

<p>The command returns the value: <code>01234567890987654321</code>. You can use this value in a configuration file.</p>

<h2 id="keys">Keys</h2>

<p>Keys managed in CDS in are from two types: <code>SSH</code> and <code>PGP</code>. Let&rsquo;s import an application with a SSH Key. Those key could be important to manage your Git repositories.</p>

<pre><code class="language-bash">➜  ~ cat app.yml
name: myapp
keys:
  app-mysshkey:
    type: ssh

➜  ~ cdsctl application import MYPROJ app.yml
Application myapp successfully created
SSH key app-mysshkey created on application myapp
</code></pre>

<p>CDS has just created a new SSH keypair on its own. To be able to keep this keypair for the future, you can gather an identifier by running an export.</p>

<pre><code class="language-bash">➜  ~ cdsctl application export FSAMIN myapp
version: v1.0
name: myapp
keys:
  app-mysshkey:
    type: ssh
    value: 19a2ca3271854c3183aabb4af9df05e1
</code></pre>

<p>Note that each time you want to import the application and <em>keep</em> the keypair as it, you <em>must</em> provide the exported value.</p>

<p>If you want to keep your application in your git repository and let CDS configure and reconfigure the application automatically, we suggest to use the <code>regen</code> option. With this option CDS will generate the SSH keypair if it doesn&rsquo;t exist, and won&rsquo;t touch it on each import.</p>

<pre><code class="language-yaml">name: myapp
keys:
  app-mysshkey:
    type: ssh
    regen: false
</code></pre>

<h2 id="vcs">VCS</h2>

<p>To be able to link an application to a VCS, you must have at least one <a href="https://ovh.github.io/cds/docs/integrations/">repository manager</a> properly configured on your CDS instance.
Each application in CDS can be linked to one repository on a repository manager.</p>

<p>Defining your VCS setup on an application will allow to benefit for the deep integration of CDS and the Repository Manager (such as GitHub). So you would be able to setup webhooks, browser through commits and publish you release easily.</p>

<table>
<thead>
<tr>
<th>Setting</th>
<th>Definition</th>
</tr>
</thead>

<tbody>
<tr>
<td>vcs_server</td>
<td>Set the name of the repository manager on which on repository is hosted</td>
</tr>

<tr>
<td>repo</td>
<td>The fullname of the repositiry i.e <code>myorg/myrepo</code></td>
</tr>

<tr>
<td>vcs_connection_type</td>
<td>Define the way you would like to checkout the code. Allowed values are <code>ssh</code> or <code>https</code></td>
</tr>

<tr>
<td>vcs_ssh_key</td>
<td>If you set <code>vcs_connection_type = ssh</code>, choose the ssh key you want to use to git clone</td>
</tr>

<tr>
<td>vcs_user</td>
<td>If you set <code>vcs_connection_type = http</code>, set the HTTP Username</td>
</tr>

<tr>
<td>vcs_password</td>
<td>If you set <code>vcs_connection_type = http</code>, set the HTTP Password</td>
</tr>

<tr>
<td>vcs_pgp_key</td>
<td>If you want to commit and sign, you can choose here a PGP Key</td>
</tr>
</tbody>
</table>

<p>Please note that you can use key at <code>project</code> or <code>application</code> level. Default <code>vcs_connection_type</code> is <code>https</code>. If your repository is public, you can omit <code>vcs_connection_type</code>, <code>vcs_user</code> and <code>vcs_password</code>.</p>

<h3 id="example">Example</h3>

<pre><code class="language-yaml">version: v1.0
name: myapp
repo: myorg/myapp
vcs_server: github
vcs_connection_type: ssh
vcs_ssh_key: proj-ssh-key
vcs_pgp_key: proj-pgp-key
</code></pre>

<p>Now we this setup you will be able to use the actions <a href="https://ovh.github.io/cds/docs/actions/checkoutapplication/">CheckoutApplication</a> and <a href="https://ovh.github.io/cds/docs/actions/release/">Release</a> in your pipelines.</p>

<h2 id="deployment">Deployment</h2>

<p>In this section, you can define the setup to deploy your application on a platform. To be able to setup it, you must have at least one <a href="https://ovh.github.io/cds/docs/integrations/">integration supporting deployment</a> properly configured on your CDS instance.</p>

<p>The <code>deployments</code> section is the list of the settings you cant to use to deployment on several platform. For instance, if you want to be able to be deploy the same application, from the same helm chart with subtle changes in variables, depending on the cluster, you can set the following configuration.</p>

<pre><code class="language-yaml">version: v1.0
name: myapp

deployments:

  my-kubernetes-cluster-A:
    namespace:
      my-namespace-A
    helm_chart:
      value: deploy/helm/
    helm_values:
      type: deploy/helm/values-cluster-A.yaml

  my-kubernetes-cluster-B:
    namespace:
      my-namespace-B
    helm_chart:
      value: deploy/helm/
    helm_values:
      type: deploy/helm/values-cluster-B.yaml
</code></pre>

<p>The list of the availabe deployment platform is available from the Web UI on the <code>project / integration</code> section, or with the command <code>cdsctl project integration list</code></p>

<pre><code class="language-bash">➜  ~ cdsctl project integration list MYPROJ
+-----------------------------+
|            NAME             |
+-----------------------------+
| my-kubernetes-cluster-A     |
| my-kubernetes-cluster-B     |
+-----------------------------+
</code></pre>

<p>The settings depend on the integration. Please refer to the <a href="https://ovh.github.io/cds/docs/integrations/">integration documentation</a>.</p>

<p>Now you are ready to use the <a href="https://ovh.github.io/cds/docs/actions/deployapplication/">DeployApplication</a> action in your pipelines.</p>




			</div>
		</section><footer>
			<main>
			<a href="https://www.ovh.com"><img src="https://ovh.github.io/cds/images/logo-ovh-white-72DPI.png"></a>
			<div>
				The CDS logos are copyrighted.
				Icons made by <a href="https://www.flaticon.com/authors/eucalyp">Eucalyp</a> 
				from <a href="https://www.flaticon.com/">www.flaticon.com</a>
			</div>
			</main>
		</footer>

	</body>
</html>
