<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="shortcut icon" href="https://ovh.github.io/cds/images/favicon.png" type="image/x-icon" />
    <title>Run conditions on pipeline :: CDS Documentation</title>
    <link href="https://ovh.github.io/cds/css/nucleus.css" rel="stylesheet">
    <link href="https://ovh.github.io/cds/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://ovh.github.io/cds/css/hybrid.css" rel="stylesheet">
    <link href="https://ovh.github.io/cds/css/featherlight.min.css" rel="stylesheet">
    <link href="https://ovh.github.io/cds/css/perfect-scrollbar.min.css" rel="stylesheet">
    <link href="https://ovh.github.io/cds/css/horsey.css" rel="stylesheet">
    <link href="https://ovh.github.io/cds/css/theme.css" rel="stylesheet">
    <link href="https://ovh.github.io/cds/css/hugo-theme.css" rel="stylesheet">
    <link rel="stylesheet" href="https://ovh.github.io/cds/css/bootstrap.min.css">
    <script src="https://ovh.github.io/cds/js/jquery-2.x.min.js"></script>
    <style type="text/css">:root #header + #content > #left > #rlblock_left
    {display:none !important;}</style>
    

  </head>
  <body class="" data-url="/building-workflows/building-workflows.pipeline-run-conditions/">
    
<nav id="sidebar">
  <div id="header-wrapper">
    <div id="header">
       
	<p><img src="https://ovh.github.io/cds/images/cds-transparent.png?width=40px" alt="CDS" /></p>
 


    </div>
    
  </div>

  <div class="highlightable">
    <ul class="topics">
        

        
        
        
        
            
    
    

    <li data-nav-id="/introduction/introduction/" class="dd-item
    
    ">
        <a href="https://ovh.github.io/cds/introduction/introduction/">
            Introduction
            
            
              
                <i style="color:grey" class="fa fa-angle-right section-icon"></i>
              
            
        </a>
        
    </li>

        
            
    
    

    <li data-nav-id="/getting-started/getting-started.first-pipeline-ui/" class="dd-item
    
    ">
        <a href="https://ovh.github.io/cds/getting-started/getting-started.first-pipeline-ui/">
            Getting Started
            
            
        </a>
        
    </li>

        
            
    
    

    <li data-nav-id="/building-pipelines/building-pipelines/" class="dd-item
    
    ">
        <a href="https://ovh.github.io/cds/building-pipelines/building-pipelines/">
            Building Pipelines
            
            
              
                <i style="color:grey" class="fa fa-angle-right section-icon"></i>
              
            
        </a>
        
    </li>

        
            
    
    

    <li data-nav-id="/building-workflows/building-workflows/" class="dd-item
    
    parent">
        <a href="https://ovh.github.io/cds/building-workflows/building-workflows/">
            Building Workflows
            
            
              
                <i style="color:grey" class="fa fa-angle-right section-icon"></i>
              
            
        </a>
        
            
            
            
                <ul>
                
                
                    
                        
    
    

    <li data-nav-id="/building-workflows/building-workflows.pipeline-run-conditions/" class="dd-item
    active
    ">
        <a href="https://ovh.github.io/cds/building-workflows/building-workflows.pipeline-run-conditions/">
            Run conditions on pipeline
            
            
        </a>
        
            
            
            
        
    </li>

                    
                
                </ul>
             
        
    </li>

        
            
    
    

    <li data-nav-id="/installation/installation/" class="dd-item
    
    ">
        <a href="https://ovh.github.io/cds/installation/installation/">
            Installation
            
            
              
                <i style="color:grey" class="fa fa-angle-right section-icon"></i>
              
            
        </a>
        
    </li>

        
            
    
    

    <li data-nav-id="/advanced/advanced/" class="dd-item
    
    ">
        <a href="https://ovh.github.io/cds/advanced/advanced/">
            Advanced
            
            
              
                <i style="color:grey" class="fa fa-angle-right section-icon"></i>
              
            
        </a>
        
    </li>

        
            
    
    

    <li data-nav-id="/tutorials/tutorials/" class="dd-item
    
    ">
        <a href="https://ovh.github.io/cds/tutorials/tutorials/">
            Tutorials
            
            
              
                <i style="color:grey" class="fa fa-angle-right section-icon"></i>
              
            
        </a>
        
    </li>

        





        
        <section id="shortcuts">
            
                <li class="" role="">
                    <h3></h3>
                    <a href="https://github.com/ovh/cds"><i class='fa fa-github'></i> Source Code</a>
                    
                </li>
            
                <li class="" role="">
                    
                    <a href="https://github.com/ovh/cds/releases"><i class='fa fa-download'></i> Releases</a>
                    
                </li>
            
                <li class="" role="">
                    
                    <a href="https://gitter.im/ovh-cds/Lobby"><i class='fa fa-commenting'></i> Gitter</a>
                    
                </li>
            
        </section>

        

        
    </ul>


    <section id="footer">
      <section style="text-align:center">
  <p>Built with <a href="http://gohugo.io/">Hugo</a> and <a href="https://github.com/vjeantet/hugo-theme-docdock">docdock theme</a></i></p>
  <p>CDS is an <a href="https://github.com/ovh">OVH OSS</a></p>
  <p><a href="https://ovh.com"><img src="https://ovh.github.io/tat/imgs/ovh-logo.png"></a></p>
</section>

    </section>
  </div>
</nav>



        <section id="body">
        <div id="overlay"></div>

        <div class="padding highlightable">
        
          <div id="top-bar">
              
                
                
                
              <div id="top-github-link">
                  <a class="github-link" href="https://github.com/ovh/cds/edit/master/docs/content/building-workflows/building-workflows.pipeline-run-conditions.md" target="blank">
                    <i class="fa fa-code-fork"></i>
                    Edit this page
                  </a>
              </div>
                
              
              <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">

                  <span id="sidebar-toggle-span">
                      <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                        <i class="fa fa-bars"></i>
                      </a>
                  </span>
                  <span id="toc-menu"><a href=""><i class="fa fa-list-alt"></i></a></span>

                      <a href="https://ovh.github.io/cds">
                      <span class="fa fa-arrow-circle-right" style="font-size:larger" aria-hidden="true"></span>
                      CDS Documentation</a>
                      
                         / <a href='https://ovh.github.io/cds/building-workflows/building-workflows/'>Building Workflows</a> / <a href='https://ovh.github.io/cds/building-workflows/building-workflows.pipeline-run-conditions/'>Run conditions on pipeline</a>
                      
                      
              </div>

                  <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#basic-run-conditions">Basic run conditions</a></li>
<li><a href="#advanced-run-conditions">Advanced run conditions</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

            </div>
        
              
            <div id="body-inner">
              
              <h1>Run conditions on pipeline</h1>
              



<p>In CDS if you want to launch a pipeline in your workflow only in specific cases you can add conditions on your pipeline in your workflow. For example if you want to run this pipeline automatically only if the value of <code>git.branch</code> is <code>master</code>.</p>

<p>If you want to edit your pipeline condition on the user interface you have to select a node under edition mode of your workflow and click on <code>Edit run conditons</code> like this :</p>

<p><img src="https://ovh.github.io/cds/images/workflow_pipeline_run_conditions_link.png" alt="Pipeline run conditions link" /></p>

<p>You have 2 types of conditions:</p>

<h2 id="basic-run-conditions">Basic run conditions</h2>

<p>With this type of conditions you can add multiple comparisons with a basic operators (<code>=</code>, <code>!=</code>, <code>match</code> for a regular expression, <code>&gt;=</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&lt;</code>). The variables syntax here are dotted syntax (example: <code>cds.dest.application</code>). If you add multiple basic run conditions, all of these must be satisfied to run the pipeline. So with basic conditions you can&rsquo;t make an <code>OR</code> between multiple conditions, it&rsquo;s always an <code>AND</code>. If you want to make more specific or advanced run conditions you have to use the second type of conditions (<code>advanced</code>).</p>

<p><img src="https://ovh.github.io/cds/images/workflow_pipeline_run_conditions_basic.png" alt="Pipeline basic run conditions" /></p>

<h2 id="advanced-run-conditions">Advanced run conditions</h2>

<p>If you want some advanced run conditions like for example make some compute over specific variables and then compare their values you have the ability to use advanced run condtions. In fact, you are free to make any compute or comparison because advanced condition is a script that you write in <a href="http://www.lua.org/">Lua</a> and MUST return a boolean (<code>true</code> if you want to run the pipeline or <code>false</code> if you don&rsquo;t). In this case the variables syntax is in unix case (example: <code>cds_dest_application</code>) and prefixed with <code>cds_</code>, <code>git_</code> or <code>workflow_</code>. Pay attention, <strong><em>all types of variables are string</em></strong>. Inside the Lua editor on CDS you have the autocompletion of your variables, you just have write <code>cds_</code>, <code>git_</code> or <code>workflow_</code> to see suggestions. Please be aware that you can&rsquo;t have at the same time basic conditions and advanced conditions. <strong><em>The behavior when you have both is that ONLY advanced run conditions will be effective</em></strong>.</p>

<p>For example if you want to launch the pipeline if the value of <code>cds_status</code> is <code>Success</code> and <code>git_branch</code> is <code>master</code> OR if the value of <code>cds_manual</code> is <code>true</code> you have to write :</p>

<pre><code class="language-lua">-- Pay attention ! All variables value are string so you compare cds_manual with the string &quot;true&quot; and not true
return cds_status == &quot;Success&quot; and (git_branch == &quot;master&quot; or cds_manual == &quot;true&quot;)
</code></pre>

<p><img src="https://ovh.github.io/cds/images/workflow_pipeline_run_conditions_advanced.png" alt="Pipeline basic run conditions" /></p>


<footer class=" footline" >
	
</footer>



      </div>
    </div>

    
 
    

    <div id="navigation">
        

          
        
              
            
                
                    
                    
                
            

            
            
        
    </div>

    </section>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="https://ovh.github.io/cds/js/clipboard.min.js"></script>
    <script src="https://ovh.github.io/cds/js/perfect-scrollbar.min.js"></script>
    <script src="https://ovh.github.io/cds/js/perfect-scrollbar.jquery.min.js"></script>
    <script src="https://ovh.github.io/cds/js/jquery.sticky-kit.min.js"></script>
    <script src="https://ovh.github.io/cds/js/featherlight.min.js"></script>
    <script src="https://ovh.github.io/cds/js/html5shiv-printshiv.min.js"></script>
    <script src="https://ovh.github.io/cds/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="https://ovh.github.io/cds/js/modernizr.custom.71422.js"></script>
    <script src="https://ovh.github.io/cds/js/learn.js"></script>
    <script src="https://ovh.github.io/cds/js/hugo-learn.js"></script>

    
    <link href="https://ovh.github.io/cds/mermaid/mermaid.css" type="text/css" rel="stylesheet"/>
    <script src="https://ovh.github.io/cds/mermaid/mermaid.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    

    

  </body>
</html>

